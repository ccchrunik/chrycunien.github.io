(self.webpackChunkyingchiaochen_website=self.webpackChunkyingchiaochen_website||[]).push([[8161],{3905:function(e,n,r){"use strict";r.d(n,{Zo:function(){return c},kt:function(){return m}});var t=r(7294);function i(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function a(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function s(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?a(Object(r),!0).forEach((function(n){i(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function l(e,n){if(null==e)return{};var r,t,i=function(e,n){if(null==e)return{};var r,t,i={},a=Object.keys(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||(i[r]=e[r]);return i}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var o=t.createContext({}),u=function(e){var n=t.useContext(o),r=n;return e&&(r="function"==typeof e?e(n):s(s({},n),e)),r},c=function(e){var n=u(e.components);return t.createElement(o.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},p=t.forwardRef((function(e,n){var r=e.components,i=e.mdxType,a=e.originalType,o=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),p=u(r),m=i,g=p["".concat(o,".").concat(m)]||p[m]||d[m]||a;return r?t.createElement(g,s(s({ref:n},c),{},{components:r})):t.createElement(g,s({ref:n},c))}));function m(e,n){var r=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var a=r.length,s=new Array(a);s[0]=p;var l={};for(var o in n)hasOwnProperty.call(n,o)&&(l[o]=n[o]);l.originalType=e,l.mdxType="string"==typeof e?e:i,s[1]=l;for(var u=2;u<a;u++)s[u]=r[u];return t.createElement.apply(null,s)}return t.createElement.apply(null,r)}p.displayName="MDXCreateElement"},359:function(e,n,r){"use strict";r.r(n),r.d(n,{frontMatter:function(){return l},contentTitle:function(){return o},metadata:function(){return u},toc:function(){return c},default:function(){return p}});var t=r(4034),i=r(9973),a=(r(7294),r(3905)),s=["components"],l={},o="Java Builder Patterns",u={unversionedId:"Programming/Design Pattern/Patterns/Builder/Java",id:"Programming/Design Pattern/Patterns/Builder/Java",isDocsHomePage:!1,title:"Java Builder Patterns",description:"HTML Builder",source:"@site/docs/Programming/Design Pattern/Patterns/Builder/Java.md",sourceDirName:"Programming/Design Pattern/Patterns/Builder",slug:"/Programming/Design Pattern/Patterns/Builder/Java",permalink:"/docs/Programming/Design Pattern/Patterns/Builder/Java",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Go Builder Patterns",permalink:"/docs/Programming/Design Pattern/Patterns/Builder/Go"},next:{title:"Builder Pattern Overview",permalink:"/docs/Programming/Design Pattern/Patterns/Builder/Overview"}},c=[{value:"HTML Builder",id:"html-builder",children:[],level:2},{value:"Recursive Builder",id:"recursive-builder",children:[],level:2},{value:"Faceted Builder",id:"faceted-builder",children:[],level:2},{value:"Extra Example",id:"extra-example",children:[],level:2},{value:"References",id:"references",children:[],level:2}],d={toc:c};function p(e){var n=e.components,r=(0,i.Z)(e,s);return(0,a.kt)("wrapper",(0,t.Z)({},d,r,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"java-builder-patterns"},"Java Builder Patterns"),(0,a.kt)("h2",{id:"html-builder"},"HTML Builder"),(0,a.kt)("p",null,"A fluent builder is a builder that return ",(0,a.kt)("inlineCode",{parentName:"p"},"this"),". This allows us to set attributes in a pipeline fashion. "),(0,a.kt)("p",null,"For brevity, we omit the implementation of the ",(0,a.kt)("inlineCode",{parentName:"p"},"HtmlElement"),". This element is just a container for storing html elements."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"class HtmlBuilder\n{\n  private String rootName;\n  private HtmlElement root = new HtmlElement();\n\n  public HtmlBuilder(String rootName)\n  {\n    this.rootName = rootName;\n    root.name = rootName;\n  }\n\n  // not fluent\n  public void addChild(String childName, String childText)\n  {\n    HtmlElement e = new HtmlElement(childName, childText);\n    root.elements.add(e);\n  }\n\n  // fluent\n  public HtmlBuilder addChildFluent(String childName, String childText)\n  {\n    HtmlElement e = new HtmlElement(childName, childText);\n    root.elements.add(e);\n    return this;\n  }\n\n  public void clear()\n  {\n    root = new HtmlElement();\n    root.name = rootName;\n  }\n\n  // delegating\n  @Override\n  public String toString()\n  {\n    return root.toString();\n  }\n}\n")),(0,a.kt)("h2",{id:"recursive-builder"},"Recursive Builder"),(0,a.kt)("p",null,"If you are not familiar with the recursive generic in Java, you can see my note in ",(0,a.kt)("inlineCode",{parentName:"p"},"Programming/Chanllenge/Java-Generic"),". This note provides an quick introduction of Java generic. In this example, what it actually means is to limit the type parameter to be only its subtype of ",(0,a.kt)("inlineCode",{parentName:"p"},"Person"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"class PersonBuilder<SELF extends PersonBuilder<SELF>>\n{\n  protected Person person = new Person();\n\n  // critical to return SELF here\n  // Because this method is own by PersonBuilder, it we return a Person type, then\n  // the it makes order matters because a Person builder do not know any child method\n  // By making the return type as SELF, it allows even when a child call this parent method,\n  // it can return the right type (Employee builder example)\n  public SELF withName(String name)\n  {\n    person.name = name;\n    return self();\n  }\n\n  // This method is to allow the builder to return itself\n  // We separate this to a method to make it can be inherited by its child\n  protected SELF self()\n  {\n    // unchecked cast, but actually safe\n    // proof: try sticking a non-PersonBuilder\n    //        as SELF parameter; it won't work!\n    return (SELF) this;\n  }\n\n  public Person build()\n  {\n    return person;\n  }\n}\n\nclass EmployeeBuilder\n  extends PersonBuilder<EmployeeBuilder>\n{\n  public EmployeeBuilder worksAs(String position)\n  {\n    person.position = position;\n    return self();\n  }\n\n  @Override\n  protected EmployeeBuilder self()\n  {\n    return this;\n  }\n}\n")),(0,a.kt)("p",null,"This is the demonstration:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'class RecursiveGenericsDemo\n{\n  public static void main(String[] args)\n  {\n    EmployeeBuilder eb = new EmployeeBuilder()\n      .withName("Dmitri")\n      .worksAs("Quantitative Analyst");\n    System.out.println(eb.build());\n  }\n}\n')),(0,a.kt)("h2",{id:"faceted-builder"},"Faceted Builder"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"class Person\n{\n  // address\n  public String streetAddress, postcode, city;\n\n  // employment\n  public String companyName, position;\n  public int annualIncome;\n\n  @Override\n  public String toString()\n  {\n    return \"Person{\" +\n      \"streetAddress='\" + streetAddress + '\\'' +\n      \", postcode='\" + postcode + '\\'' +\n      \", city='\" + city + '\\'' +\n      \", companyName='\" + companyName + '\\'' +\n      \", position='\" + position + '\\'' +\n      \", annualIncome=\" + annualIncome +\n      '}';\n  }\n}\n")),(0,a.kt)("p",null,"This builder create a reference of a person. However, in comparison with the previous example, ",(0,a.kt)("inlineCode",{parentName:"p"},"Person")," class has the complete attributes. What we do here is simple split several builder methods into various class to make the code cleaner. (We delegate some builder methods to subclasses, make it complete some predifined settings.)"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"// builder facade\nclass PersonBuilder\n{\n  // the object we're going to build\n  protected Person person = new Person(); // reference!\n\n  public PersonJobBuilder works()\n  {\n    return new PersonJobBuilder(person);\n  }\n\n  public PersonAddressBuilder lives()\n  {\n    return new PersonAddressBuilder(person);\n  }\n\n  public Person build()\n  {\n    return person;\n  }\n}\n\nclass PersonAddressBuilder extends PersonBuilder\n{\n  public PersonAddressBuilder(Person person)\n  {\n    this.person = person;\n  }\n\n  public PersonAddressBuilder at(String streetAddress)\n  {\n    person.streetAddress = streetAddress;\n    return this;\n  }\n\n  public PersonAddressBuilder withPostcode(String postcode)\n  {\n    person.postcode = postcode;\n    return this;\n  }\n\n  public PersonAddressBuilder in(String city)\n  {\n    person.city = city;\n    return this;\n  }\n}\n\nclass PersonJobBuilder extends PersonBuilder\n{\n  public PersonJobBuilder(Person person)\n  {\n    this.person = person;\n  }\n\n  public PersonJobBuilder at(String companyName)\n  {\n    person.companyName = companyName;\n    return this;\n  }\n\n  public PersonJobBuilder asA(String position)\n  {\n    person.position = position;\n    return this;\n  }\n\n  public PersonJobBuilder earning(int annualIncome)\n  {\n    person.annualIncome = annualIncome;\n    return this;\n  }\n}\n")),(0,a.kt)("p",null,"Demo:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'class BuilderFacetsDemo\n{\n  public static void main(String[] args)\n  {\n    PersonBuilder pb = new PersonBuilder();\n    Person person = pb\n      .lives()\n        .at("123 London Road")\n        .in("London")\n        .withPostcode("SW12BC")\n      .works()\n        .at("Fabrikam")\n        .asA("Engineer")\n        .earning(123000)\n      .build();\n    System.out.println(person);\n  }\n}\n')),(0,a.kt)("h2",{id:"extra-example"},"Extra Example"),(0,a.kt)("p",null,"In this example, we use an inner class as a class builder. The benefit of using inner class is to provide stronger encapsulation. Since what we really care about is to create new ",(0,a.kt)("inlineCode",{parentName:"p"},"User")," object, it doesn't matter how we can accomplish it. By encapsulating the builder class in the main class, it provides a single static interface for other classes to call."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"public final class User {\n    private final String nickname;\n    private final String password;\n    private final String firstname;\n    private final String lastname;\n    private final String email;\n    private final Date created;\n\n    private User(UserBuilder builder) {\n        this.nickname = builder.nickname;\n        this.password = builder.password;\n        this.created = builder.created;\n        this.firstname = builder.firstname;\n        this.lastname = builder.lastname;\n        this.email = builder.email;\n    }\n\n    public static UserBuilder getBuilder(\n        String nickname, String password) {\n        return new User.UserBuilder(nickname, password);\n     }\n\n    public static final class UserBuilder {\n        private final String nickname;\n        private final String password;\n        private final Date created;\n        private String email;\n        private String firstname;\n        private String lastname;\n        \n        public UserBuilder(String nickname, String password) {\n            this.nickname = nickname;\n            this.password = password;\n            this.created = new Date();\n        }\n\n        public UserBuilder firstName(String firstname) {\n            this.firstname = firstname;\n            return this;\n        }\n\n        public UserBuilder lastName(String lastname) {\n            this.lastname = lastname;\n            return this;\n        }\n\n        public UserBuilder email(String email) {\n            this.email = email;\n            return this;\n        }\n\n        public User build() {\n            return new User(this);\n        } \n    }\n\n    // omit getters and setters\n    ...\n}\n")),(0,a.kt)("p",null,"Usage:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'import static modern.challenge.User.getBuilder;\n\nUser user1 = getBuilder("marin21", "hjju9887h").build();\n// user with nickname, password and email\nUser user2 = getBuilder("ionk", "44fef22")\n    .email("ion@gmail.com")\n    .build();\n// user with nickname, password, email, firstname and lastname\nUser user3 = getBuilder("monika", "klooi0988")\n    .email("monika@gmail.com")\n    .firstName("Monika")\n    .lastName("Ghuenter")\n    .build();\n')),(0,a.kt)("h2",{id:"references"},"References"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Anghel Leonard - Java Coding Problems"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://www.udemy.com/course/design-patterns-java/"},"https://www.udemy.com/course/design-patterns-java/"))))}p.isMDXComponent=!0}}]);