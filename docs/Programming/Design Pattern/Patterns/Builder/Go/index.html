<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.5">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="My Personal Website Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="My Personal Website Blog Atom Feed"><title data-react-helmet="true">Go Builder Patterns | My Personal Website</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://github.com/woodcutter-eric/woodcutter-eric.github.io//docs/Programming/Design Pattern/Patterns/Builder/Go"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Go Builder Patterns | My Personal Website"><meta data-react-helmet="true" name="description" content="String Builder"><meta data-react-helmet="true" property="og:description" content="String Builder"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://github.com/woodcutter-eric/woodcutter-eric.github.io//docs/Programming/Design Pattern/Patterns/Builder/Go"><link data-react-helmet="true" rel="alternate" href="https://github.com/woodcutter-eric/woodcutter-eric.github.io//docs/Programming/Design Pattern/Patterns/Builder/Go" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://github.com/woodcutter-eric/woodcutter-eric.github.io//docs/Programming/Design Pattern/Patterns/Builder/Go" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.1c3fec5b.css">
<link rel="preload" href="/assets/js/runtime~main.79980759.js" as="script">
<link rel="preload" href="/assets/js/main.766a0f5f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title">Home</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Note</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/woodcutter-eric" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/intro">Tutorial Intro</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Cloud</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Linux</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Programming</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Design Pattern</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Patterns</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Builder</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Programming/Design Pattern/Patterns/Builder/Go">Go Builder Patterns</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Programming/Design Pattern/Patterns/Builder/Java">Java Builder Patterns</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Programming/Design Pattern/Patterns/Builder/Overview">Builder Pattern Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Factory</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Principle</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Language</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Submarine</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">System</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">TODO</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Tools</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1>Go Builder Patterns</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="string-builder"></a>String Builder<a class="hash-link" href="#string-builder" title="Direct link to heading">#</a></h2><p>This code snippets use string builder to construct a html document.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly golang"><pre tabindex="0" class="prism-code language-golang codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">func main() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  hello := &quot;hello&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  sb := strings.Builder{}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  sb.WriteString(&quot;&lt;p&gt;&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  sb.WriteString(hello)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  sb.WriteString(&quot;&lt;/p&gt;&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  fmt.Printf(&quot;%s\n&quot;, sb.String())</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  words := []string{&quot;hello&quot;, &quot;world&quot;}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  sb.Reset()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  // &lt;ul&gt;&lt;li&gt;...&lt;/li&gt;&lt;li&gt;...&lt;/li&gt;&lt;li&gt;...&lt;/li&gt;&lt;/ul&gt;&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  sb.WriteString(&quot;&lt;ul&gt;&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  for _, v := range words {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    sb.WriteString(&quot;&lt;li&gt;&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    sb.WriteString(v)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    sb.WriteString(&quot;&lt;/li&gt;&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  sb.WriteString(&quot;&lt;/ul&gt;&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  fmt.Println(sb.String())</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="html-builder"></a>HTML builder<a class="hash-link" href="#html-builder" title="Direct link to heading">#</a></h2><p>This code snippet create a html builder to create a html document. You can see that it&#x27;s much more simpler to construct a html file that using the basix string builder (although it use string builder behind the scene).</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly golang"><pre tabindex="0" class="prism-code language-golang codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">const (</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  indentSize = 2</span></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">type HtmlElement struct {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  name, text string</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  elements []HtmlElement</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func (e *HtmlElement) String() string {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  return e.string(0)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func (e *HtmlElement) string(indent int) string {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  sb := strings.Builder{}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  i := strings.Repeat(&quot; &quot;, indentSize * indent)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  sb.WriteString(fmt.Sprintf(&quot;%s&lt;%s&gt;\n&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    i, e.name))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  if len(e.text) &gt; 0 {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    sb.WriteString(strings.Repeat(&quot; &quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      indentSize * (indent + 1)))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    sb.WriteString(e.text)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    sb.WriteString(&quot;\n&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  for _, el := range e.elements {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    sb.WriteString(el.string(indent+1))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  sb.WriteString(fmt.Sprintf(&quot;%s&lt;/%s&gt;\n&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    i, e.name))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  return sb.String()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">type HtmlBuilder struct {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  rootName string</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  root HtmlElement</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func NewHtmlBuilder(rootName string) *HtmlBuilder {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  b := HtmlBuilder{rootName,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    HtmlElement{rootName, &quot;&quot;, []HtmlElement{}}}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  return &amp;b</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func (b *HtmlBuilder) String() string {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  return b.root.String()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func (b *HtmlBuilder) AddChild(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  childName, childText string) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  e := HtmlElement{childName, childText, []HtmlElement{}}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  b.root.elements = append(b.root.elements, e)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func (b *HtmlBuilder) AddChildFluent(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  childName, childText string) *HtmlBuilder {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  e := HtmlElement{childName, childText, []HtmlElement{}}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  b.root.elements = append(b.root.elements, e)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  return b</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func main() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  b := NewHtmlBuilder(&quot;ul&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  b.AddChildFluent(&quot;li&quot;, &quot;hello&quot;).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    AddChildFluent(&quot;li&quot;, &quot;world&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  fmt.Println(b.String())</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="faceted-builder"></a>Faceted Builder<a class="hash-link" href="#faceted-builder" title="Direct link to heading">#</a></h2><p>Sometimes we have many field to initialize, we can separate them into multiple builder to make the initialization easier.</p><p>First, we create a <code>Person</code> struct and a <code>PersonBuilder</code> and add some utility functions to it.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly golang"><pre tabindex="0" class="prism-code language-golang codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">type Person struct {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Address</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  StreetAddress, Postcode, City string</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Job</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  CompanyName, Position string</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  AnnualIncome int</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">type PersonBuilder struct {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  person *Person // needs to be inited</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func NewPersonBuilder() *PersonBuilder {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  return &amp;PersonBuilder{&amp;Person{}}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func (it *PersonBuilder) Build() *Person {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  return it.person</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func (it *PersonBuilder) Works() *PersonJobBuilder {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  return &amp;PersonJobBuilder{*it}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func (it *PersonBuilder) Lives() *PersonAddressBuilder {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  return &amp;PersonAddressBuilder{*it}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>And actually, because <code>PersonJobBuilder</code> and <code>PersonAddressBuilder</code> just like a <code>PersonBuilder</code> (see Go&#x27;s struct prompted fields for further understanding.) They can use functions defined in <code>PersonBuilder</code>, which acts as inheritance features in OOP language.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly golang"><pre tabindex="0" class="prism-code language-golang codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">type PersonJobBuilder struct {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  PersonBuilder</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func (pjb *PersonJobBuilder) At(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  companyName string) *PersonJobBuilder {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  pjb.person.CompanyName = companyName</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  return pjb</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func (pjb *PersonJobBuilder) AsA(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  position string) *PersonJobBuilder {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  pjb.person.Position = position</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  return pjb</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func (pjb *PersonJobBuilder) Earning(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  annualIncome int) *PersonJobBuilder {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  pjb.person.AnnualIncome = annualIncome</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  return pjb</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly golang"><pre tabindex="0" class="prism-code language-golang codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">type PersonAddressBuilder struct {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  PersonBuilder</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func (it *PersonAddressBuilder) At(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  streetAddress string) *PersonAddressBuilder {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  it.person.StreetAddress = streetAddress</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  return it</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func (it *PersonAddressBuilder) In(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  city string) *PersonAddressBuilder {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  it.person.City = city</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  return it</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func (it *PersonAddressBuilder) WithPostcode(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  postcode string) *PersonAddressBuilder {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  it.person.Postcode = postcode</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  return it</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly golang"><pre tabindex="0" class="prism-code language-golang codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">func main() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  pb := NewPersonBuilder()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  pb.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    Lives().</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      At(&quot;123 London Road&quot;).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      In(&quot;London&quot;).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      WithPostcode(&quot;SW12BC&quot;).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    Works().</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      At(&quot;Fabrikam&quot;).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      AsA(&quot;Programmer&quot;).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      Earning(123000)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  person := pb.Build()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  fmt.Println(*person)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="force-to-use-builder"></a>Force to use builder<a class="hash-link" href="#force-to-use-builder" title="Direct link to heading">#</a></h2><p>The email builder provides a <code>SendEmail</code> wrapper function to guard against the direct creation without using the builder.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly golang"><pre tabindex="0" class="prism-code language-golang codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">type email struct {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    from, to, subject, body string</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">type EmailBuilder struct {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    email email</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func (b *EmailBuilder) From(from string) *EmailBuilder {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    if !strings.Contains(from, &quot;@&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        panic(&quot;email should contain @&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    b.email.from = from</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return b</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func (b *EmailBuilder) To(to string) *EmailBuilder {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    b.email.to = to</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return b</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func (b *EmailBuilder) Subject(subject string) *EmailBuilder {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    b.email.subject = subject</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return b</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func (b *EmailBuilder) Body(body string) *EmailBuilder {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    b.email.body = body</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return b</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func sendMailImpl(email *email) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // actually ends the email</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">type build func(*EmailBuilder)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func SendEmail(action build) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    builder := EmailBuilder{}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    action(&amp;builder)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    sendMailImpl(&amp;builder.email)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func main() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    SendEmail(func(b *EmailBuilder) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        b.From(&quot;foo@bar.com&quot;).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            To(&quot;bar@baz.com&quot;).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            Subject(&quot;Meeting&quot;).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            Body(&quot;Hello, do you want to meet?&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    })</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="functional-builder"></a>Functional Builder<a class="hash-link" href="#functional-builder" title="Direct link to heading">#</a></h2><p>This builder demostrate the builder using functional style.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly golang"><pre tabindex="0" class="prism-code language-golang codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">type Person struct {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  name, position string</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">type personMod func(*Person)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">type PersonBuilder struct {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  actions []personMod</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func (b *PersonBuilder) Called(name string) *PersonBuilder {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  b.actions = append(b.actions, func(p *Person) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    p.name = name</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  })</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  return b</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func (b *PersonBuilder) Build() *Person {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  p := Person{}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  for _, a := range b.actions {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    a(&amp;p)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  return &amp;p</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// extend PersonBuilder</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func (b *PersonBuilder) WorksAsA(position string) *PersonBuilder {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  b.actions = append(b.actions, func(p *Person) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    p.position = position</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  })</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  return b</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func main() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  b := PersonBuilder{}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  p := b.Called(&quot;Dmitri&quot;).WorksAsA(&quot;dev&quot;).Build()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  fmt.Println(*p)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="code-reuse"></a>Code Reuse<a class="hash-link" href="#code-reuse" title="Direct link to heading">#</a></h2><p>Because Go does not support inheritance like in Java, its builder pattern will be slightly different. In addition, Go lacks constructor and access modifier, which makes it harder to encapsulate, so actually you have direct access to the field of a type. We still can break the instantiation process by adding several setters like we did in Java. If you want to achieve same effect in Java, you can use <code>sync.Once</code>.</p><p>Therefore, we will focus on how to reuse codes in the following examples.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="examples"></a>Examples<a class="hash-link" href="#examples" title="Direct link to heading">#</a></h3><p>This example use an interface <code>BuildProcess</code> to abstract the construction of a vehicle. By adding a <code>ManufacturingDirector</code>, we reuse the construction process and only need to pass a different builder to this director. Then we can make a car in a simple way.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly golang"><pre tabindex="0" class="prism-code language-golang codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">type BuildProcess interface {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    SetWheels() BuildProcess</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    SetSeats() BuildProcess</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    SetStructure() BuildProcess</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    GetVehicle() VehicleProduct</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">//Director</span></span><span class="token-line" style="color:#393A34"><span class="token plain">type ManufacturingDirector struct {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    builder BuildProcess</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func (f *ManufacturingDirector) Construct() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    f.builder.SetSeats().SetStructure().SetWheels()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func (f *ManufacturingDirector) SetBuilder(b BuildProcess) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    f.builder = b</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">//Product</span></span><span class="token-line" style="color:#393A34"><span class="token plain">type VehicleProduct struct {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    Wheels    int</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    Seats     int</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    Structure string</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">//A Builder of type car</span></span><span class="token-line" style="color:#393A34"><span class="token plain">type CarBuilder struct {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    v VehicleProduct</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func (c *CarBuilder) SetWheels() BuildProcess {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    c.v.Wheels = 4</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return c</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func (c *CarBuilder) SetSeats() BuildProcess {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    c.v.Seats = 5</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return c</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func (c *CarBuilder) SetStructure() BuildProcess {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    c.v.Structure = &quot;Car&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return c</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func (c *CarBuilder) GetVehicle() VehicleProduct {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return c.v</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">//A Builder of type motorbike</span></span><span class="token-line" style="color:#393A34"><span class="token plain">type BikeBuilder struct {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    v VehicleProduct</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func (b *BikeBuilder) SetWheels() BuildProcess {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    b.v.Wheels = 2</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return b</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func (b *BikeBuilder) SetSeats() BuildProcess {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    b.v.Seats = 2</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return b</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func (b *BikeBuilder) SetStructure() BuildProcess {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    b.v.Structure = &quot;Motorbike&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return b</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func (b *BikeBuilder) GetVehicle() VehicleProduct {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return b.v</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Demo:</p><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">builder_test.go</div><div class="codeBlockContent_hGly golang"><pre tabindex="0" class="prism-code language-golang codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">manufacturingComplex := ManufacturingDirector{}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">carBuilder := &amp;CarBuilder{}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">manufacturingComplex.SetBuilder(carBuilder)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">manufacturingComplex.Construct()</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">car := carBuilder.GetVehicle()</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">if car.Wheels != 4 {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    t.Errorf(&quot;Wheels on a car must be 4 and they were %d\n&quot;, car.Wheels)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">if car.Structure != &quot;Car&quot; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    t.Errorf(&quot;Structure on a car must be &#x27;Car&#x27; and was %s\n&quot;, car.Structure)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">if car.Seats != 5 {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    t.Errorf(&quot;Seats on a car must be 5 and they were %d\n&quot;, car.Seats)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">bikeBuilder := &amp;BikeBuilder{}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">manufacturingComplex.SetBuilder(bikeBuilder)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">manufacturingComplex.Construct()</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">motorbike := bikeBuilder.GetVehicle()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">motorbike.Seats = 1</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">if motorbike.Wheels != 2 {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    t.Errorf(&quot;Wheels on a motorbike must be 2 and they were %d\n&quot;, motorbike.Wheels)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">if motorbike.Structure != &quot;Motorbike&quot; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    t.Errorf(&quot;Structure on a motorbike must be &#x27;Motorbike&#x27; and was %s\n&quot;, motorbike.Structure)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="disadvatanges"></a>Disadvatanges<a class="hash-link" href="#disadvatanges" title="Direct link to heading">#</a></h3><p>In Go, it is not as flexible in Java because Go does not support some features. Thus, try to avoid using builder if the build interface is not stable, or it will affect a lot of existing code (in order to satisfy the interface).</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="references"></a>References<a class="hash-link" href="#references" title="Direct link to heading">#</a></h2><ul><li><a href="https://www.udemy.com/course/design-patterns-go" target="_blank" rel="noopener noreferrer">https://www.udemy.com/course/design-patterns-go</a></li><li><a href="https://github.com/PacktPublishing/Go-Design-Patterns/blob/master/Chapter02/builder.go" target="_blank" rel="noopener noreferrer">https://github.com/PacktPublishing/Go-Design-Patterns/blob/master/Chapter02/builder.go</a></li><li><a href="https://github.com/PacktPublishing/Go-Design-Patterns/blob/master/Chapter02/builder_test.go" target="_blank" rel="noopener noreferrer">https://github.com/PacktPublishing/Go-Design-Patterns/blob/master/Chapter02/builder_test.go</a></li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/Linux/System Programming/Setup"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Setup</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/Programming/Design Pattern/Patterns/Builder/Java"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Java Builder Patterns Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#string-builder" class="table-of-contents__link">String Builder</a></li><li><a href="#html-builder" class="table-of-contents__link">HTML builder</a></li><li><a href="#faceted-builder" class="table-of-contents__link">Faceted Builder</a></li><li><a href="#force-to-use-builder" class="table-of-contents__link">Force to use builder</a></li><li><a href="#functional-builder" class="table-of-contents__link">Functional Builder</a></li><li><a href="#code-reuse" class="table-of-contents__link">Code Reuse</a><ul><li><a href="#examples" class="table-of-contents__link">Examples</a></li><li><a href="#disadvatanges" class="table-of-contents__link">Disadvatanges</a></li></ul></li><li><a href="#references" class="table-of-contents__link">References</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.79980759.js"></script>
<script src="/assets/js/main.766a0f5f.js"></script>
</body>
</html>